class ClaimHeader < ActiveRecord::Migration[5.0]
  def up
    execute "create table l2.claim_header(source_id varchar(10), source_name varchar(200), source_type varchar(100),workflow_id varchar(100),author varchar(200),vendor_version varchar(55),vendor_name varchar(100),aco_id varchar(10),aco_name varchar(200),source_file_name varchar(100),workspace_id varchar(100), ingestion_datetime datetime,empi varchar(100), local_member_id varchar(100), claim_charge_flag varchar(20), claim_id varchar(30), first_date_of_service date, last_date_of_service date, payer_id integer, payer_name varchar(200), plan_id integer, plan_name varchar(200), drg varchar(100), drg_code varchar(10), discharge_disposition_code varchar(100), primary_diagnosis_code varchar(30), diagnosis_coding_system varchar(50), claim_subsmission_date date, claim_processing_date date, claim_adjudication_date date, claim_approval_date date, admission_type varchar(50), present_at_admission varchar(50), claim_type varchar(50), facility_type varchar(50), service_type varchar(50), frequency_type varchar(50), type_of_bill varchar(50), place_of_service varchar(100), servicing_provider_npi varchar(20), servicing_provider varchar(100), attending_provider_npi varchar(20), attending_provider varchar(100), other_provider_npi varchar(20), other_provider varchar(100), practice_npi varchar(20), practice_name varchar(200), claim_nch_code varchar(30), claim_query_code varchar(30), tax_id varchar(20), ccn varchar(20), servicing_tax_org_name varchar(200), allowed_amount decimal(18,2), total_claim_amount decimal(18,2), total_insurance_paid_amount decimal(18,2), co_pay decimal(18,2), deductible decimal(18,2), eligible_amount decimal(18,2), file_no varchar(100), adjustment_status varchar(20), adjustment_reason varchar(255), referral_source_code varchar(30), out_network_flag varchar(20), denial_reason varchar(255), birth_date date, author_date datetime, author_id integer, author_name varchar(200)) distkey(empi) interleaved sortkey (empi, claim_id, first_date_of_service, plan_id);"
  end
  def down
    execute "drop table claim_header";
  end
end
